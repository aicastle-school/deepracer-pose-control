<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <link rel="stylesheet"  href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/main.css" />

  </head>
  <body class="bg-light">
    <div class="container-fluid px-4 mt-4">
      <div class="row align-items-stretch">
        <!-- 왼쪽 카드 -->
        <div class="col-md-3">
          <div class="card shadow-sm h-100">
            <div class="card-body text-center">
              <h5 class="card-title font-weight-bold">
                Pose Estimation
              </h5>
              <canvas id="canvas" width="100%" height="200"></canvas>

              <h6 class="mt-3">Prediction</h6>
              <div class="controller-result text-left">
                <!-- Chart.js Canvas -->
                <!-- 자동차 조종 결과 -->
                <canvas id="predictionChart" height="300"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- 오른쪽 카드 -->
        <!-- 오른쪽 col-md-8 내에 카드 2개 정렬 -->
        <div class="col-md-9">
          <!-- 차량 전면 카메라 카드 -->
          <div class="card shadow-sm mb-2">
            <div class="card-body text-center py-4 position-relative">
              <!-- py-4로 위아래 여백 대칭 -->
              <h4 class="font-weight-bold mb-3">Front Camera</h4>
              <img src="./video" alt="Front Camera" class="img-fluid rounded d-block mx-auto" style="width:70%; aspect-ratio:4/3; object-fit:cover;"/>

                  <!-- 계기판  wrapper-->
                  <div class="position-absolute" style="left:50%; transform:translateX(-50%); bottom:10px;">
                  <!-- 계기판  canvas-->
                  <canvas id="arrowCanvas" width="2000" height="700" style="background:transparent;"></canvas>
                </div>
            </div>

            <div class="card-body" style="padding:0;">
                <div class="d-flex justify-content-around align-items-center p-3 border rounded bg-light">
                  <!-- Speed 정보 -->
                  <div class="text-center">
                    <div class="text-muted small">Speed</div>
                    <div id="currentSpeed" class="h5 font-weight-bold text-primary">0</div>
                  </div>

                  <!-- Angle 정보 -->
                  <div class="text-center">
                    <div class="text-muted small">Angle</div>
                    <div id="currentAngle" class="h5 font-weight-bold text-success">0</div>
                  </div>
                </div>
            </div>
          </div>
          
          <div class="row g-0 mt-3">
            <!-- ─── 스피드 조절 ─── -->
            <div class="col-md-4">
              <div class="card shadow-sm h-100">
                <div class="card-body py-3">
                  <div class="d-flex justify-content-between mb-2">
                    <strong>Speed Percent ( + / - )</strong>
                    <span id="speedValue">50%</span>
                  </div>
                  <input type="range" class="form-range" min="1" max="100" value="50" id="speedRange", style="width: 100%;">
                </div>
              </div>
            </div>

            <!-- ─── Stop ─── -->
            <div class="col-md-4">
              <div class="card shadow-sm h-100">
                <div class="card-body text-center py-4" style="padding: 0 !important;">
                  <label class="switch">
                    <input type="checkbox" id="stopToggle">
                    <span class="slider"></span>
                  </label>
                  <div class="switch-label">Stop (Enter)</div>
                </div>
              </div>
            </div>

            <!-- ─── Smooth ─── -->
            <div class="col-md-4">
              <div class="card shadow-sm h-100">
                <div class="card-body text-center py-4" style="padding: 0 !important;">
                  <label class="switch">
                    <input type="checkbox" id="smoothToggle">
                    <span class="slider"></span>
                  </label>
                  <div class="switch-label">Smooth (Spacebar)</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@0.8.3/dist/teachablemachine-pose.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="assets/main.js"></script>
    <script src="assets/set_speed_percent.js"></script>
    <script src="assets/arrow.js"></script>
  </body>
</html>